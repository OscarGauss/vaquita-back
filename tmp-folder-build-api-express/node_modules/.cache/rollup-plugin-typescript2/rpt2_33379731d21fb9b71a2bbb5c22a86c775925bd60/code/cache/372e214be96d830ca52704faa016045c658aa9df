{"code":"import { LogLevel } from '@juki-team/commons';\nimport { COMPANY_HOSTS } from 'config/settings';\nimport { log } from 'helpers';\nexport { loggerRequestTimeHandler, errorLoggerHandler, errorResponderHandler, failSafeHandler, notFoundResponse, } from '@juki-team/base-back';\nexport function setCompany() {\n    return async (_req, res, next) => {\n        const req = _req;\n        let referer, host = ''; //, domain, subdomain;\n        try {\n            referer = req.header('Referer');\n            host = referer?.split?.('/')?.[2] || '';\n            // domain = host.split('.').splice(-2).join('.');\n            // subdomain = host.split('.').slice(0, -2).join('.');\n            let companyId = -1;\n            COMPANY_HOSTS.forEach((hosts, index) => {\n                if (hosts.includes(host)) {\n                    companyId = index + 1;\n                }\n            });\n            if (companyId > 0) {\n                req.company = { id: `company-${companyId}` };\n            }\n            else {\n                req.company = { id: '' };\n            }\n        }\n        catch (error) {\n            log(LogLevel.ERROR)('Error on setCompany', { error });\n        }\n        next();\n    };\n}\n","references":["/Users/oscargauss/Documents/projects/Vaquinha/vaquina-back/node_modules/@juki-team/base-back/dist/esm/index.d.ts","/Users/oscargauss/Documents/projects/Vaquinha/vaquina-back/node_modules/@juki-team/commons/dist/types/index.d.ts","/Users/oscargauss/Documents/projects/Vaquinha/vaquina-back/tmp-folder-build-api-express/src/config/settings.ts","/Users/oscargauss/Documents/projects/Vaquinha/vaquina-back/node_modules/@types/express/index.d.ts","/Users/oscargauss/Documents/projects/Vaquinha/vaquina-back/tmp-folder-build-api-express/src/helpers/index.ts","/Users/oscargauss/Documents/projects/Vaquinha/vaquina-back/tmp-folder-build-api-express/src/types/index.ts","/Users/oscargauss/Documents/projects/Vaquinha/vaquina-back/node_modules/@juki-team/base-back/dist/esm/index.d.ts"]}
